CREATE DATABASE news_events_db;
USE news_events_db;

CREATE TABLE IF NOT EXISTS news_events_cleaned (
    event_id VARCHAR(255) PRIMARY KEY,
    source_file VARCHAR(255),
    company_name VARCHAR(255),
    company_name_clean VARCHAR(255),
    product VARCHAR(255),
    article_title TEXT,
    article_url TEXT,
    article_url_clean TEXT,
    article_domain VARCHAR(255),
    article_sentence TEXT,
    phone VARCHAR(50),
    phone_clean VARCHAR(50),
    created_at DATETIME NULL,
    publish_date DATETIME NULL,
    raw_json JSON NULL,
    ingestion_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS dq_metrics_run (
    run_id VARCHAR(255) PRIMARY KEY,
    run_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    rows_before INT,
    rows_after INT,
    duplicates_removed INT,
    invalid_urls_before INT,
    invalid_urls_after INT,
    missing_counts_before TEXT,
    missing_counts_after TEXT,
    note TEXT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


SELECT * FROM news_events_cleaned LIMIT 10;

SELECT * FROM dq_metrics_run LIMIT 10;